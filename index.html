<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <!-- SEO Tags and Favicon Added -->
    <title>Pencarian Data Mahasiswa PDDIKTI - Weebs Version</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Cari dan verifikasi data mahasiswa dari Pangkalan Data Pendidikan Tinggi (PDDIKTI) dengan antarmuka yang terinspirasi oleh anime dan Wuthering Waves. Cepat, mudah, dan tidak resmi.">
    <meta name="keywords" content="PDDIKTI, Cek Mahasiswa, Data Mahasiswa, Forlap, Dikti, Wuthering Waves, Changli, Rover, Anime, Weebs">
    <meta name="author" content="Rover the Karbit">
    <link rel="icon" type="image/png" href="https://oyster.ignimgs.com/mediawiki/apis.ign.com/wuthering-waves/3/30/Rover-havoc-male-icon.png">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://pddikti.animu.my.id/"> <!-- Placeholder URL, ganti jika perlu -->
    <meta property="og:title" content="Pencarian Data Mahasiswa PDDIKTI - Weebs Version">
    <meta property="og:description" content="Cari data mahasiswa PDDIKTI dengan antarmuka yang terinspirasi oleh Changli dari Wuthering Waves.">
    <meta property="og:image" content="https://oyster.ignimgs.com/mediawiki/apis.ign.com/wuthering-waves/3/30/Rover-havoc-male-icon.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://pddikti.animu.my.id/"> <!-- Placeholder URL, ganti jika perlu -->
    <meta property="twitter:title" content="Pencarian Data Mahasiswa PDDIKTI - Weebs Version">
    <meta property="twitter:description" content="Cari data mahasiswa PDDIKTI dengan antarmuka yang terinspirasi oleh Changli dari Wuthering Waves.">
    <meta property="twitter:image" content="https://oyster.ignimgs.com/mediawiki/apis.ign.com/wuthering-waves/3/30/Rover-havoc-male-icon.png">
    <!-- End of SEO Tags -->

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #ffd1e3 0%, #ffb6d9 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top left, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at bottom right, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }
        .menu-item {
            position: relative;
            z-index: 1;
        }
        .menu-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ffb6d9;
            border-radius: 0.375rem;
            opacity: 0;
            z-index: -1;
            transform: scale(0.8);
            transition: all 0.3s ease;
        }
        .menu-item:hover::before {
            opacity: 0.3;
            transform: scale(1);
        }
        .search-container {
            position: relative;
            z-index: 10;
        }
        .search-input {
            border: 2px solid #ff80bf;
            box-shadow: 0 0 15px rgba(255, 128, 191, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .search-input::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: inherit;
            background: linear-gradient(45deg, #ff4dab, #ff80bf, #ff4dab);
            z-index: -1;
            opacity: 0;
            transform: scale(0.98);
            transition: all 0.4s ease;
        }
        .search-input:focus {
            border-color: #ff4dab;
            box-shadow: 0 0 20px rgba(255, 77, 171, 0.5);
        }
        .search-input:focus::before {
            opacity: 1;
            transform: scale(1);
        }
        .search-button {
            background: linear-gradient(135deg, #ff80bf 0%, #ff4dab 100%);
            box-shadow: 0 4px 15px rgba(255, 77, 171, 0.4);
            transition: all 0.3s ease;
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            overflow: hidden;
        }
        .search-button:hover {
            box-shadow: 0 6px 20px rgba(255, 77, 171, 0.6);
            transform: translateY(-50%) scale(1.02);
        }
        .search-button:active {
            transform: translateY(-50%) scale(0.98);
        }
        .bubble {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            animation: float 8s infinite ease-in-out;
            pointer-events: none;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0); }
            50% { transform: translateY(-20px) translateX(10px); }
        }
        .changli-silhouette {
            position: absolute;
            bottom: -5px;
            right: 0;
            height: 80%;
            opacity: 0.15;
            z-index: 1;
            pointer-events: none;
        }
        .results-container {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 128, 191, 0.3);
            box-shadow: 0 10px 25px rgba(255, 77, 171, 0.2);
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease, padding 0.5s ease;
            position: relative;
        }
        .results-visible {
            max-height: 60vh;
            padding: 1.5rem;
            overflow-y: auto;
        }
        .result-card {
            border-left: 3px solid #ff80bf;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
        }
        .result-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, rgba(255, 230, 240, 0) 0%, rgba(255, 230, 240, 0.5) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 0;
        }
        .result-card:hover::before {
            opacity: 1;
        }
        .result-card > * {
            position: relative;
            z-index: 1;
        }
        .result-card:hover {
            transform: translateX(5px);
            border-left-color: #ff4dab;
            background-color: rgba(255, 230, 240, 0.5);
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 128, 191, 0.3);
            border-radius: 50%;
            border-top-color: #ff4dab;
            animation: spin 1s ease-in-out infinite;
            position: relative;
        }
        .loading::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            right: 2px;
            bottom: 2px;
            border-radius: 50%;
            border: 2px solid transparent;
            border-top-color: #ff4dab;
            opacity: 0.5;
            animation: spin 1.5s linear infinite reverse;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .cursor-dot {
            position: fixed;
            width: 8px;
            height: 8px;
            background-color: rgba(255, 128, 191, 0.7);
            border-radius: 50%;
            pointer-events: none;
            opacity: 0;
            transform: scale(0);
            animation: fadeOutScale 0.8s forwards;
            z-index: 9999;
        }
        @keyframes fadeOutScale {
            0% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0); }
        }
        .confetti {
            position: absolute;
            width: 8px;
            height: 8px;
            background-color: var(--confetti-color);
            border-radius: 50%;
            opacity: 0;
            animation: confetti-fall 1s forwards;
            pointer-events: none;
            z-index: 999;
        }
        @keyframes confetti-fall {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
            100% { transform: translate(var(--x), var(--y)) rotate(720deg); opacity: 0; }
        }
        /* Chat Modal Styles */
        .chat-bubble {
            max-width: 75%;
            padding: 0.75rem 1rem;
            border-radius: 1.25rem;
            position: relative;
            word-wrap: break-word; /* Ensures text wraps */
            overflow-wrap: break-word; /* Modern property for word wrapping */
        }
        .chat-bubble-me {
            background-color: #ff4dab;
            color: white;
            border-bottom-right-radius: 0.25rem;
        }
        .chat-bubble-other {
            background-color: #fce4ec;
            color: #880e4f;
            border-bottom-left-radius: 0.25rem;
        }
        .chat-bubble-rover {
            background: linear-gradient(135deg, #fce4ec, #f8bbd0);
            border: 1px solid #ff80bf;
            box-shadow: 0 0 15px rgba(255, 128, 191, 0.5);
            color: #880e4f; /* Set text color to match 'other' bubbles */
            border-bottom-left-radius: 0.25rem; /* Add tail to match 'other' bubbles */
        }
        .chat-input {
            border-top: 1px solid #ffc1e3;
        }
        .chat-send-btn {
            background-color: #ff80bf;
            transition: background-color 0.2s;
        }
        .chat-send-btn:hover {
            background-color: #ff4dab;
        }
        .chat-send-btn:disabled {
            background-color: #f8bbd0;
            cursor: not-allowed;
        }
        .rover-name-container {
            position: relative;
            display: inline-flex;
            align-items: center;
        }
        .rover-name-festive {
            animation: festive-colors 2s infinite;
        }
        @keyframes festive-colors {
            0%, 100% { color: #ad1457; }
            25% { color: #ff4dab; }
            50% { color: #880e4f; }
            75% { color: #ff80bf; }
        }
        /* Gender Selection */
        .gender-icon {
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            color: #f48fb1; /* Light pink */
            font-size: 2rem;
            line-height: 1;
        }
        .gender-icon:hover {
            transform: scale(1.1);
            color: #ec407a; /* Medium pink */
        }
        .gender-icon.selected {
            color: #d81b60; /* Dark pink */
            transform: scale(1.1);
            filter: drop-shadow(0 0 5px rgba(216, 27, 96, 0.7));
        }
        /* In-chat Notification */
        .chat-notification {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            text-align: center;
            margin: 0 auto;
            max-width: 90%;
            animation: fadeInOut 4s ease-in-out forwards;
        }
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateY(10px); }
            15% { opacity: 1; transform: translateY(0); }
            85% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-10px); }
        }
        /* Rover bubble particles */
        .bubble-particle {
            position: absolute;
            border-radius: 50%;
            background-color: #ff80bf;
            opacity: 0;
            animation: bubble-rise 2s ease-out infinite;
            pointer-events: none;
        }
        @keyframes bubble-rise {
            0% { transform: translateY(0) scale(0.5); opacity: 1; }
            100% { transform: translateY(-50px) scale(1); opacity: 0; }
        }
    </style>
</head>
<body class="flex flex-col min-h-screen" id="top">
    <!-- Background elements -->
    <div class="bubble w-32 h-32 top-20 left-20" style="animation-delay: 0s;"></div>
    <div class="bubble w-24 h-24 top-40 right-40" style="animation-delay: 1s;"></div>
    <div class="bubble w-40 h-40 bottom-20 left-1/4" style="animation-delay: 2s;"></div>
    <div class="bubble w-20 h-20 bottom-40 right-1/3" style="animation-delay: 3s;"></div>
    <div class="absolute text-5xl text-pink-300 opacity-60 top-1/4 left-1/5 z-0 animate-pulse" style="animation-duration: 3s;">+</div>
    <div class="absolute text-6xl text-pink-200 opacity-50 bottom-1/3 right-1/6 z-0 animate-bounce" style="animation-duration: 4s;">o</div>

    <!-- Menu Bar -->
    <nav class="bg-white bg-opacity-80 backdrop-blur-sm shadow-md w-full z-20 fixed top-0 left-0">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-3">
                <div class="flex items-center">
                    <div class="text-pink-600 font-bold text-xl">PDDIKTI Weebs Version</div>
                </div>
                <div class="hidden md:flex space-x-8">
                    <a href="#top" id="home-link" class="menu-item text-pink-900 hover:text-pink-600 transition-colors font-medium relative px-3 py-1">Home</a>
                    <a href="#" id="chat-link-desktop" class="menu-item text-pink-900 hover:text-pink-600 transition-colors font-medium relative px-3 py-1">Chat</a>
                    <a href="#" id="disclaimer-link" class="menu-item text-pink-900 hover:text-pink-600 transition-colors font-medium relative px-3 py-1">Disclaimer</a>
                    <a href="#" id="faq-link" class="menu-item text-pink-900 hover:text-pink-600 transition-colors font-medium relative px-3 py-1">F.A.Q</a>
                    <a href="#" id="about-link-desktop" class="menu-item text-pink-900 hover:text-pink-600 transition-colors font-medium relative px-3 py-1">About</a>
                    <div class="relative group">
                        <button class="menu-item flex items-center text-pink-900 hover:text-pink-600 transition-colors font-medium relative px-3 py-1">
                            <span id="current-language">English</span>
                            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="absolute right-0 mt-2 w-40 bg-white bg-opacity-90 backdrop-blur-sm rounded-lg shadow-lg overflow-hidden transform scale-0 group-hover:scale-100 transition-transform origin-top-right z-50">
                            <a href="#" class="language-option block px-4 py-2 text-pink-900 hover:bg-pink-100 transition-colors" data-lang="en">English</a>
                            <a href="#" class="language-option block px-4 py-2 text-pink-900 hover:bg-pink-100 transition-colors" data-lang="id">Indonesia</a>
                        </div>
                    </div>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-pink-900 focus:outline-none"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button>
                </div>
            </div>
            <div id="mobile-menu" class="md:hidden hidden pb-4">
                <a href="#top" id="mobile-home-link" class="block py-2 px-4 text-pink-900 hover:bg-pink-100 rounded-md mt-1">Home</a>
                <a href="#" id="chat-link-mobile" class="block py-2 px-4 text-pink-900 hover:bg-pink-100 rounded-md mt-1">Chat</a>
                <a href="#" id="mobile-disclaimer-link" class="block py-2 px-4 text-pink-900 hover:bg-pink-100 rounded-md mt-1">Disclaimer</a>
                <a href="#" id="mobile-faq-link" class="block py-2 px-4 text-pink-900 hover:bg-pink-100 rounded-md mt-1">F.A.Q</a>
                <a href="#" id="about-link-mobile" class="block py-2 px-4 text-pink-900 hover:bg-pink-100 rounded-md mt-1">About</a>
                <div class="mt-2 border-t border-pink-100 pt-2">
                    <p class="px-4 text-sm text-pink-800 mb-1">Language</p>
                    <a href="#" class="mobile-language-option block py-2 px-4 text-pink-900 hover:bg-pink-100 rounded-md" data-lang="en">English</a>
                    <a href="#" class="mobile-language-option block py-2 px-4 text-pink-900 hover:bg-pink-100 rounded-md" data-lang="id">Indonesia</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="h-16"></div>

    <svg class="changli-silhouette" viewBox="0 0 800 1200" xmlns="http://www.w3.org/2000/svg"><path d="M500,1200 C600,1100 650,1000 680,900 C710,800 720,700 700,600 C680,500 640,450 600,400 C560,350 500,300 450,250 C400,200 380,150 370,100 C360,50 350,30 300,20 C250,10 200,20 150,50 C100,80 80,120 70,170 C60,220 50,270 60,320 C70,370 90,420 120,470 C150,520 190,570 200,620 C210,670 200,720 180,770 C160,820 130,870 120,920 C110,970 120,1020 150,1070 C180,1120 230,1170 300,1190 C370,1210 450,1200 500,1200 Z" fill="#ff80bf" /></svg>

    <div class="container mx-auto px-4 relative z-10 flex-grow flex items-center justify-center">
        <div class="flex flex-col md:flex-row items-start justify-between w-full max-w-6xl">
            <div class="md:w-1/2 md:pr-8 flex flex-col items-start w-full">
                <div class="text-left mb-6 w-full">
                    <h1 class="text-4xl md:text-5xl font-bold text-pink-900 mb-2">Unofficial PDDIKTI Data Search</h1>
                    <p class="text-lg text-pink-800 opacity-90">Search and Verify Student Data in PDDIKTI Database</p>
                </div>
                <div class="bg-white bg-opacity-80 backdrop-blur-sm p-4 rounded-xl shadow-lg border border-pink-200 w-full max-w-3xl mb-6">
                    <h2 class="text-lg font-bold text-pink-900 mb-3">Quote of the Day</h2>
                    <blockquote id="quote-of-the-day" class="text-gray-800 italic text-sm mb-3">"People can be kind. People can be cruel. That’s just the way the world is."</blockquote>
                    <p id="quote-author" class="text-xs text-pink-700">- Elaina</p>
                </div>
                <div class="search-container max-w-3xl w-full">
                    <div class="relative">
                        <input type="text" id="search-input" class="search-input w-full py-4 px-6 rounded-full text-lg focus:outline-none bg-white bg-opacity-90 backdrop-blur-sm" placeholder="Enter student name...">
                        <button id="search-button" class="search-button px-6 py-3 rounded-full text-white font-medium flex items-center">
                            <span id="search-button-text" class="mr-2">Search</span>
                            <span id="search-icon"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></span>
                            <span id="loading-icon" class="loading hidden"></span>
                        </button>
                    </div>
                    <div id="results-container" class="results-container mt-6 rounded-xl w-full">
                        <div class="text-pink-900 font-medium mb-4">Search Results</div>
                        <div id="results-list" class="space-y-4"></div>
                    </div>
                </div>
            </div>
            <div class="md:w-1/2 md:pl-8 flex flex-col items-center md:items-end mt-8 md:mt-0">
                <div class="relative w-full flex justify-center md:justify-end">
                    <img src="https://wuthering-waves.gamemeta.ru/upload/resize_cache/iblock/c45/uq6xj6zv8l6hboyfccw3q8sa3ajzis45/374_512_1619711fa078991f0a23d032687646b21/card_changli.webp" alt="Changli from Wuthering Waves" class="h-96 md:h-[28rem] object-contain rounded-xl shadow-lg" style="filter: drop-shadow(0 0 10px rgba(255, 128, 191, 0.5));" onerror="this.onerror=null;this.src='https://placehold.co/374x512/ffd1e3/ff4dab?text=Changli';">
                    <div class="absolute -bottom-4 -right-4 bg-pink-100 bg-opacity-80 backdrop-blur-sm px-4 py-2 rounded-lg shadow-md border border-pink-200"><span class="text-pink-800 font-medium">Changli</span></div>
                </div>
                <p class="text-sm text-pink-900 opacity-70 mt-4 text-center md:text-right w-full">Inspired by Changli from Wuthering Waves</p>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="student-modal" class="fixed inset-0 bg-black bg-opacity-0 z-50 flex items-center justify-center hidden transition-all duration-300">
        <div class="bg-white rounded-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto transform scale-95 opacity-0 transition-all duration-300" id="modal-content">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4"><h3 class="text-xl font-bold text-pink-900">Student Details</h3><button id="close-modal" class="text-gray-500 hover:text-gray-700 focus:outline-none transition-colors"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>
                <div id="student-details-content" class="space-y-4"></div>
            </div>
        </div>
    </div>
    <div id="disclaimer-modal" class="fixed inset-0 bg-black bg-opacity-0 z-50 flex items-center justify-center hidden transition-all duration-300">
        <div class="bg-white rounded-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto transform scale-95 opacity-0 transition-all duration-300" id="disclaimer-modal-content">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4"><h3 id="disclaimer-title" class="text-xl font-bold text-pink-900">DISCLAIMER</h3><button id="close-disclaimer-modal" class="text-gray-500 hover:text-gray-700 focus:outline-none transition-colors"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>
                <div id="disclaimer-content" class="space-y-4 text-gray-700"></div>
            </div>
        </div>
    </div>
    <div id="faq-modal" class="fixed inset-0 bg-black bg-opacity-0 z-50 flex items-center justify-center hidden transition-all duration-300">
        <div class="bg-white rounded-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto transform scale-95 opacity-0 transition-all duration-300" id="faq-modal-content">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4"><h3 class="text-xl font-bold text-pink-900">F.A.Q</h3><button id="close-faq-modal" class="text-gray-500 hover:text-gray-700 focus:outline-none transition-colors"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>
                <div class="space-y-6 text-gray-700" id="faq-content-container"></div>
            </div>
        </div>
    </div>
    <div id="about-modal" class="fixed inset-0 bg-black bg-opacity-0 z-50 flex items-center justify-center hidden transition-all duration-300">
        <div class="bg-white rounded-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto transform scale-95 opacity-0 transition-all duration-300" id="about-modal-content">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4"><h3 class="text-xl font-bold text-pink-900">About</h3><button id="close-about-modal" class="text-gray-500 hover:text-gray-700 focus:outline-none transition-colors"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>
                <div class="flex flex-col md:flex-row items-center md:items-start gap-6">
                    <div class="w-40 h-40 rounded-full overflow-hidden border-4 border-pink-300 shadow-lg flex-shrink-0"><img src="https://oyster.ignimgs.com/mediawiki/apis.ign.com/wuthering-waves/3/30/Rover-havoc-male-icon.png" alt="Rover" class="w-full h-full object-cover" onerror="this.onerror=null;this.src='https://placehold.co/160x160/ffd1e3/ff4dab?text=Rover';"></div>
                    <div class="text-center md:text-left">
                        <h4 class="text-xl font-bold text-pink-800 mb-3">Rover the Karbit</h4>
                        <div id="about-content-en" class="about-content"></div>
                        <div id="about-content-id" class="about-content hidden"></div>
                        <div class="mt-4 flex justify-center md:justify-start"><span class="bg-pink-100 text-pink-800 px-3 py-1 rounded-full text-sm font-medium">Changli's Husband</span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="chat-modal" class="fixed inset-0 bg-black bg-opacity-0 z-50 flex items-center justify-center hidden transition-all duration-300">
        <div class="bg-white rounded-xl max-w-lg w-full mx-4 h-[80vh] max-h-[600px] flex flex-col transform scale-95 opacity-0 transition-all duration-300" id="chat-modal-content">
            <div class="p-4 border-b border-pink-200 flex justify-between items-center flex-shrink-0">
                <div class="flex items-center">
                    <h3 class="text-xl font-bold text-pink-900 mr-4">Global Chat</h3>
                    <div id="gender-selection" class="flex items-center space-x-3" title="Pilih gender Anda">
                        <span id="select-male" class="gender-icon">♂</span>
                        <span id="select-female" class="gender-icon">♀</span>
                    </div>
                </div>
                <button id="close-chat-modal" class="text-gray-500 hover:text-gray-700 focus:outline-none transition-colors"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
            </div>
            <div id="chat-messages" class="flex-grow p-4 space-y-4 overflow-y-auto">
                 <div class="text-center py-4 text-pink-800">Loading messages...</div>
            </div>
            <div class="p-4 chat-input flex-shrink-0">
                <div id="chat-notification-area" class="h-8 mb-2 flex justify-center items-center">
                    <!-- In-chat notifications will appear here -->
                </div>
                <div class="relative">
                    <input type="text" id="chat-input-field" class="w-full py-3 pl-4 pr-16 rounded-full bg-pink-50 border-2 border-pink-200 focus:border-pink-400 focus:outline-none focus:ring-1 focus:ring-pink-400 transition" placeholder="Pilih gender dulu..." disabled>
                    <button id="chat-send-btn" class="absolute right-2 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full text-white flex items-center justify-center chat-send-btn" disabled>
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- General Element Selectors ---
            const searchButton = document.getElementById('search-button');
            const searchInput = document.getElementById('search-input');
            const resultsContainer = document.getElementById('results-container');
            const resultsList = document.getElementById('results-list');
            const currentLanguage = document.getElementById('current-language');
            const languageOptions = document.querySelectorAll('.language-option');
            const mobileLanguageOptions = document.querySelectorAll('.mobile-language-option');
            const searchButtonText = document.getElementById('search-button-text');
            const searchIcon = document.getElementById('search-icon');
            const loadingIcon = document.getElementById('loading-icon');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            
            // --- API Endpoints ---
            const SEARCH_API_URL = 'https://api-mahasiswa.animu.my.id/search/';
            const DETAIL_API_URL = 'https://api-mahasiswa.animu.my.id/detail/';
            const CHAT_POST_URL = 'https://api-mahasiswa.animu.my.id/chat';

            // --- Chat Implementation ---
            const MALE_NAMES = ["Zagan", "Gabimaru", "Kazuma", "Tanjiro", "Rimuru", "Gojo", "Yuji", "Stark", "Goku", "Himmel", "Jinshi", "Jinwoo", "Okarun", "Masamune", "Ichigo", "Kyotaro", "Cid", "Sakamoto", "Haruka", "Ragna"];
            const FEMALE_NAMES = ["Frieren", "Fern", "Elaina", "Maomao", "Nobara", "Yor", "Alya", "Nynym", "Waguri", "Kurumi", "Eris", "Ai", "Makima", "Chisato", "Emilia", "Megumin", "Yuki", "Marin", "Mahiru", "Shion"];
            
            let userAuthorID = null;
            let chatUpdateInterval = null;
            let isInitialChatLoad = true;

            // --- New Chat State Variables for Infinite Scroll ---
            let currentChatStart = 0;
            const chatPageSize = 50;
            let isLoadingMoreChats = false;
            let allPreviousChatsLoaded = false;
            let chatScrollListener = null; // To hold the listener function reference

            const chatModal = document.getElementById('chat-modal');
            const chatModalContent = document.getElementById('chat-modal-content');
            const chatMessagesContainer = document.getElementById('chat-messages');
            const chatInputField = document.getElementById('chat-input-field');
            const chatSendBtn = document.getElementById('chat-send-btn');
            const selectMaleBtn = document.getElementById('select-male');
            const selectFemaleBtn = document.getElementById('select-female');
            const chatNotificationArea = document.getElementById('chat-notification-area');

            selectMaleBtn.addEventListener('click', () => selectGender('male'));
            selectFemaleBtn.addEventListener('click', () => selectGender('female'));
            chatSendBtn.addEventListener('click', sendApiMessage);
            chatInputField.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendApiMessage();
            });

            function selectGender(gender) {
                const lang = currentLanguage.textContent === 'English' ? 'en' : 'id';
                if (gender === 'male') {
                    userAuthorID = Math.floor(Math.random() * 20) + 1;
                    selectMaleBtn.classList.add('selected');
                    selectFemaleBtn.classList.remove('selected');
                } else {
                    userAuthorID = Math.floor(Math.random() * 20) + 21;
                    selectFemaleBtn.classList.add('selected');
                    selectMaleBtn.classList.remove('selected');
                }
                chatInputField.placeholder = translations[lang].chatPlaceholderReady;
                chatInputField.disabled = false;
                chatSendBtn.disabled = false;
                showNotification(translations[lang].genderSelected(gender), 'info');
            }

            function showNotification(message, type = 'success') {
                chatNotificationArea.innerHTML = ''; // Clear previous notification
                const notif = document.createElement('div');
                const bgColor = type === 'error' ? 'bg-red-100 text-red-700' : type === 'info' ? 'bg-blue-100 text-blue-700' : 'bg-green-100 text-green-700';
                notif.className = `chat-notification ${bgColor}`;
                notif.textContent = message;
                chatNotificationArea.appendChild(notif);

                setTimeout(() => {
                    if (notif.parentNode === chatNotificationArea) {
                       chatNotificationArea.innerHTML = '';
                    }
                }, 4000);
            }

            // --- CHAT LOGIC REFACTORED FOR INFINITE SCROLL ---

            // New function to load older chats when scrolling up
            async function loadPreviousChats() {
                if (isLoadingMoreChats || allPreviousChatsLoaded) return;

                isLoadingMoreChats = true;
                const loader = document.createElement('div');
                loader.className = 'text-center py-2 text-pink-700';
                loader.innerHTML = `<div class="loading mx-auto"></div>`;
                chatMessagesContainer.prepend(loader);

                const nextBatchStart = currentChatStart + chatPageSize;
                const url = `https://api-mahasiswa.animu.my.id/get-chat?start=${nextBatchStart}&end=${nextBatchStart + chatPageSize}`;

                try {
                    const response = await fetch(url);
                    const messages = await response.json();

                    loader.remove();

                    if (messages.length === 0) {
                        allPreviousChatsLoaded = true;
                        const noMoreMsg = document.createElement('div');
                        noMoreMsg.className = 'text-center py-2 text-sm text-pink-500';
                        noMoreMsg.textContent = 'Semua pesan telah dimuat.';
                        chatMessagesContainer.prepend(noMoreMsg);
                        return;
                    }

                    currentChatStart = nextBatchStart; // Update start index only on success
                    messages.sort((a, b) => a.chatID.localeCompare(b.chatID));

                    const oldScrollHeight = chatMessagesContainer.scrollHeight;

                    // Prepend messages in correct order
                    messages.slice().reverse().forEach(msg => {
                        const bubble = createApiMessageBubble(msg);
                        chatMessagesContainer.prepend(bubble);
                    });

                    // Restore scroll position to prevent jarring jump
                    chatMessagesContainer.scrollTop = chatMessagesContainer.scrollHeight - oldScrollHeight;

                } catch (error) {
                    console.error('Error fetching previous chats:', error);
                    loader.textContent = 'Gagal memuat pesan.';
                    setTimeout(() => loader.remove(), 2000);
                } finally {
                    isLoadingMoreChats = false;
                }
            }
            
            // This function now handles the initial load AND the 5-second refresh for NEW messages
            async function refreshLatestChats() {
                const url = `https://api-mahasiswa.animu.my.id/get-chat?start=0&end=${chatPageSize}`;
                try {
                    const response = await fetch(url);
                    if (!response.ok) throw new Error('Network response was not ok');
                    const messages = await response.json();
                    
                    messages.sort((a, b) => a.chatID.localeCompare(b.chatID));

                    if (isInitialChatLoad) {
                        isInitialChatLoad = false;
                        chatMessagesContainer.innerHTML = ''; 
                        if (messages.length === 0) {
                            chatMessagesContainer.innerHTML = `<div class="text-center py-4 text-pink-800">No messages yet. Be the first!</div>`;
                        } else {
                            messages.forEach(msg => {
                                const bubble = createApiMessageBubble(msg);
                                chatMessagesContainer.appendChild(bubble);
                            });
                        }
                        chatMessagesContainer.scrollTop = chatMessagesContainer.scrollHeight;
                    } else {
                        // For refresh, just add new messages without a full re-render
                        const existingIds = new Set([...chatMessagesContainer.querySelectorAll('[data-chat-id]')].map(el => el.dataset.chatId));
                        let newMessagesAdded = false;
                        messages.forEach(msg => {
                            if (!existingIds.has(msg.chatID)) {
                                const bubble = createApiMessageBubble(msg);
                                chatMessagesContainer.appendChild(bubble);
                                newMessagesAdded = true;
                            }
                        });
                        if (newMessagesAdded) {
                            chatMessagesContainer.scrollTop = chatMessagesContainer.scrollHeight;
                        }
                    }
                } catch (error) {
                    console.error('Error fetching chat:', error);
                    if(isInitialChatLoad) {
                        isInitialChatLoad = false;
                        chatMessagesContainer.innerHTML = `<div class="text-center py-4 text-pink-800">Gagal memuat obrolan.</div>`;
                    }
                }
            }

            async function sendApiMessage() {
                const lang = currentLanguage.textContent === 'English' ? 'en' : 'id';
                const messageText = chatInputField.value.trim();

                if (!userAuthorID) {
                    showNotification(translations[lang].errorSelectGender, 'error');
                    return;
                }
                if (!messageText) return;

                chatSendBtn.disabled = true;

                try {
                    const response = await fetch(CHAT_POST_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ message: messageText, authorID: userAuthorID })
                    });

                    const result = await response.json();

                    if (response.ok && result.status) {
                        showNotification(translations[lang].successSend, 'success');
                        chatInputField.value = '';
                        await refreshLatestChats(); // Refresh to show the new message
                    } else if (result.error) {
                        showNotification(`${translations[lang].errorSendFailed}: ${result.error}`, 'error');
                    } else {
                        throw new Error('Unknown API response');
                    }
                } catch (error) {
                    console.error('Error sending message:', error);
                    showNotification(translations[lang].errorSendFailed, 'error');
                } finally {
                    chatSendBtn.disabled = false;
                }
            }

            function getNameForAuthorID(id) {
                const numId = parseInt(id, 10);
                if (id === 'admin') return 'Rover';
                if (numId >= 1 && numId <= 20) return MALE_NAMES[numId - 1] || 'Unknown User';
                if (numId >= 21 && numId <= 40) return FEMALE_NAMES[numId - 21] || 'Unknown User';
                return `User ${id}`;
            }

            function createApiMessageBubble(msg) {
                const isMe = msg.authorID == userAuthorID;
                const isAdmin = msg.authorID === 'admin';
                const authorName = getNameForAuthorID(msg.authorID);

                const wrapper = document.createElement('div');
                wrapper.className = `flex flex-col ${isMe ? 'items-end' : 'items-start'}`;
                wrapper.dataset.chatId = msg.chatID;
                
                const bubble = document.createElement('div');
                let bubbleClass = 'chat-bubble ';
                if (isMe) bubbleClass += 'chat-bubble-me';
                else if (isAdmin) bubbleClass += 'chat-bubble-rover';
                else bubbleClass += 'chat-bubble-other';
                bubble.className = bubbleClass;
                
                const nameContainer = document.createElement('div');
                nameContainer.className = 'flex items-center mb-1';

                const userLabel = document.createElement('span');
                userLabel.className = 'font-bold text-sm';
                userLabel.textContent = authorName;
                
                if (isAdmin) {
                    const icon = document.createElement('img');
                    icon.src = 'https://oyster.ignimgs.com/mediawiki/apis.ign.com/wuthering-waves/3/30/Rover-havoc-male-icon.png';
                    icon.alt = 'Rover Icon';
                    icon.className = 'w-6 h-6 rounded-full mr-2 border-2 border-pink-200';
                    nameContainer.appendChild(icon);
                    
                    userLabel.classList.add('rover-name-festive');

                    for (let i = 0; i < 5; i++) {
                        const particle = document.createElement('div');
                        particle.className = 'bubble-particle';
                        particle.style.left = `${Math.random() * 100}%`;
                        particle.style.top = `${Math.random() * 100}%`;
                        particle.style.width = `${Math.random() * 6 + 2}px`;
                        particle.style.height = particle.style.width;
                        particle.style.animationDelay = `${Math.random() * 2}s`;
                        bubble.appendChild(particle);
                    }
                }
                
                nameContainer.appendChild(userLabel);

                const textLabel = document.createElement('p');
                textLabel.textContent = msg.message;

                bubble.appendChild(nameContainer);
                bubble.appendChild(textLabel);
                wrapper.appendChild(bubble);

                const timeLabel = document.createElement('div');
                timeLabel.className = `text-xs mt-1 px-2 opacity-75 ${isMe ? 'text-white' : 'text-pink-900'}`;
                timeLabel.textContent = `${msg.date} ${msg.time}`;
                wrapper.appendChild(timeLabel);

                return wrapper;
            }

            function openChat() {
                // Reset chat state
                isInitialChatLoad = true;
                currentChatStart = 0;
                allPreviousChatsLoaded = false;
                isLoadingMoreChats = false;

                chatMessagesContainer.innerHTML = `<div class="text-center py-4 text-pink-800">Loading messages...</div>`;
                openModal(chatModal, chatModalContent);
                refreshLatestChats(); // Initial load
                
                // Add scroll listener for loading previous messages
                chatScrollListener = () => {
                    if (chatMessagesContainer.scrollTop === 0 && !isLoadingMoreChats) {
                        loadPreviousChats();
                    }
                };
                chatMessagesContainer.addEventListener('scroll', chatScrollListener);

                chatUpdateInterval = setInterval(refreshLatestChats, 5000);
            }
            
            function closeChat() {
                if (chatUpdateInterval) {
                    clearInterval(chatUpdateInterval);
                    chatUpdateInterval = null;
                }
                // Important: Remove the listener to prevent memory leaks
                if (chatScrollListener) {
                    chatMessagesContainer.removeEventListener('scroll', chatScrollListener);
                    chatScrollListener = null;
                }
                closeModal(chatModal, chatModalContent);
            }

            // --- Search Functionality ---
            async function performSearch() {
                const query = searchInput.value.trim();
                if (!query) return;
                createConfetti(searchButton);
                setLoadingState(true);
                try {
                    const encodedQuery = encodeURIComponent(query);
                    const response = await fetch(`${SEARCH_API_URL}${encodedQuery}`);
                    if (!response.ok) throw new Error(`API Error: ${response.status}`);
                    const data = await response.json();
                    displayResults(data);
                } catch (error) {
                    console.error('Error in performSearch:', error);
                    const lang = currentLanguage.textContent === 'English' ? 'en' : 'id';
                    resultsList.innerHTML = `<div class="text-center py-4 text-pink-800">${translations[lang].errorMessage}</div>`;
                    resultsContainer.classList.add('results-visible');
                } finally {
                    setLoadingState(false);
                }
            }

            function setLoadingState(isLoading) {
                const lang = currentLanguage.textContent === 'English' ? 'en' : 'id';
                if (isLoading) {
                    searchButtonText.textContent = translations[lang].searching;
                    searchIcon.classList.add('hidden');
                    loadingIcon.classList.remove('hidden');
                    searchButton.disabled = true;
                } else {
                    searchButtonText.textContent = translations[lang].searchButton;
                    searchIcon.classList.remove('hidden');
                    loadingIcon.classList.add('hidden');
                    searchButton.disabled = false;
                }
            }

            function displayResults(data) {
                resultsList.innerHTML = '';
                const lang = currentLanguage.textContent === 'English' ? 'en' : 'id';

                if (data && data.length > 0) {
                    data.forEach(item => {
                        const resultCard = document.createElement('div');
                        resultCard.className = 'result-card bg-white bg-opacity-70 p-4 rounded-lg shadow-sm cursor-pointer';
                        resultCard.innerHTML = `
                            <h3 class="font-bold text-pink-900">${item.nama || 'N/A'}</h3>
                            <div class="flex flex-wrap text-sm mt-2">
                                <span class="bg-pink-100 text-pink-800 px-2 py-1 rounded mr-2 mb-2">NIM: ${item.nim || 'N/A'}</span>
                                <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded mr-2 mb-2">${item.nama_prodi || 'N/A'}</span>
                            </div>
                            <div class="mt-2">
                                <p class="text-gray-700"><span class="font-medium">University:</span> ${item.nama_pt || 'N/A'}</p>
                                ${item.sinkatan_pt ? `<p class="text-gray-600 text-sm">${item.sinkatan_pt}</p>` : ''}
                            </div>
                            <div class="mt-3 text-right">
                                <span class="text-pink-600 text-sm flex items-center justify-end">
                                    <span>View details</span>
                                    <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                                </span>
                            </div>`;
                        resultCard.addEventListener('click', () => showStudentDetails(item));
                        resultsList.appendChild(resultCard);
                    });
                } else {
                    resultsList.innerHTML = `<div class="text-center py-4 text-pink-800">${translations[lang].noResults}</div>`;
                }
                resultsContainer.classList.add('results-visible');
            }

            const studentModal = document.getElementById('student-modal');
            const studentDetailsContent = document.getElementById('student-details-content');
            async function showStudentDetails(student) {
                openModal(studentModal, document.getElementById('modal-content'));
                studentDetailsContent.innerHTML = `<div class="flex justify-center items-center p-8"><div class="loading"></div></div>`;
                try {
                    const response = await fetch(`${DETAIL_API_URL}${student.id}`);
                    if (!response.ok) throw new Error('Failed to fetch details');
                    const details = await response.json();
                    
                    const entryDate = new Date(details.tanggal_masuk).toLocaleDateString('id-ID', { day: '2-digit', month: 'long', year: 'numeric' });
                    const status = (details.status_saat_ini || 'N/A').replace('-', '').trim();
                    const statusColor = status === 'Aktif' ? 'bg-green-100 text-green-800' : status === 'Lulus' ? 'bg-blue-100 text-blue-800' : 'bg-yellow-100 text-yellow-800';

                    const fields = [
                        { label: 'Perguruan Tinggi', value: details.nama_pt },
                        { label: 'Jenis Kelamin', value: details.jenis_kelamin === 'L' ? 'Laki-laki' : 'Perempuan' },
                        { label: 'Tanggal Masuk', value: entryDate },
                        { label: 'NIM', value: (details.nim || '').trim() },
                        { label: 'Jenjang - Program Studi', value: `${details.jenjang} - ${details.prodi}` },
                        { label: 'Status Awal Mahasiswa', value: details.jenis_daftar },
                        { label: 'Status Terakhir Mahasiswa', value: status }
                    ];

                    let content = `<div class="bg-pink-50 p-4 rounded-lg mb-4"><h4 class="text-lg font-bold text-pink-800">${details.nama}</h4><p class="text-sm text-pink-600">${(details.nim || '').trim()}</p></div>`;
                    fields.forEach(field => {
                        content += `<div class="border-b border-gray-200 py-2"><div class="text-sm text-gray-500">${field.label}</div><div class="font-medium text-gray-800">${field.value || 'N/A'}</div></div>`;
                    });
                    content += `<div class="mt-4 flex justify-end"><span class="${statusColor} px-3 py-1 rounded-full text-sm font-medium">${status}</span></div>`;
                    studentDetailsContent.innerHTML = content;
                } catch (error) {
                    studentDetailsContent.innerHTML = `<div class="text-center py-4 text-pink-800">Could not load details.</div>`;
                }
            }

            // --- Language and Translations ---
            const translations = {
                en: {
                    title: "Unofficial PDDIKTI Data Search", subtitle: "Search and Verify Student Data in PDDIKTI Database", placeholder: "Enter student name...", searchButton: "Search", searching: "Searching...", resultsTitle: "Search Results", noResults: "No results found.", errorMessage: "Error connecting to API.",
                    disclaimerTitle: "DISCLAIMER FOR PDDIKTI UI CUSTOMIZATION SERVICE", disclaimerContent: `<p>This service is designed solely for the purpose of customizing the user interface (UI) of the PDDIKTI platform. We do not provide, modify, store, or process data sourced from PDDIKTI. Interaction with PDDIKTI core data and functionality remains entirely under the control and responsibility of the user and PDDIKTI.</p><p>We understand the importance of data integrity and continuity of PDDIKTI services. Therefore, we expressly state that:</p><ul class="list-disc pl-5 space-y-2"><li><strong>Primary Focus is UI:</strong> This service ONLY focuses on providing visual options or layouts to enhance the user experience on the PDDIKTI UI and does NOT affect core functions, databases, or security of the PDDIKTI system.</li><li><strong>No Data Modification:</strong> We do not intervene, modify, delete, or add any data to the PDDIKTI system. All displayed data is original data provided by PDDIKTI.</li><li><strong>Not an Official PDDIKTI Service:</strong> This service is NOT part of or officially supported by the Data and Information Technology Center (Pusdatin) of the Ministry of Education, Culture, Research, and Technology of the Republic of Indonesia, or other PDDIKTI parties.</li></ul><h4 class="font-bold text-lg text-pink-900 mt-6">FOLLOW-UP ON POTENTIAL LOSSES:</h4><p>If in the future, the Data and Information Technology Center (Pusdatin) of the Ministry of Education, Culture, Research, and Technology, or authorities over the PDDIKTI platform, feel disadvantaged or find that our service directly or indirectly violates policies, causes disruption, or potentially damages the integrity of the PDDIKTI system, then we reserve the right and will immediately take the following steps:</p><ul class="list-disc pl-5 space-y-2"><li><strong>Service Closure:</strong> We will permanently terminate the operational of this UI customization service.</li><li><strong>IP Access Blocking:</strong> We may block IP addresses associated with the provision of this service to prevent further access to the PDDIKTI platform if deemed necessary.</li></ul><p class="mt-4">We are committed to maintaining internet usage ethics and respecting the intellectual property rights and security of other parties' systems.</p>`,
                    chatPlaceholderReady: "Type a message...",
                    genderSelected: (gender) => `Gender set to ${gender}. You can now chat.`,
                    errorSelectGender: "Please select a gender before chatting.",
                    errorSendFailed: "Failed to send message",
                    successSend: "Message sent successfully!",
                    faqContent: [{q: "Is there anyone prettier than Changli?", a: "Yes, my wife in real life."}, {q: "What if I'm a man and don't like Changli?", a: "Please see a psychologist, your mental health must be damaged."}, {q: "Can I borrow your API?", a: "No, I'm too lazy to set it up."}, {q: "Can I claim Changli as my wife?", a: "Share your location if you dare!!!"}, {q: "Are there other waifus?", a: "Maybe Firefly, but Changli is number one."}],
                    aboutContent: `<p class="text-gray-700 leading-relaxed">Hello! I'm Rover the Karbit, a true adventurer always ready to explore every corner of the world—though sometimes my greatest adventure is finding the lost TV remote. My biggest pride? I'm Changli's Husband, and believe me, life with her is far more exciting than climbing Everest (and much warmer too!).</p>`,
                    allQuotes: [{q: "Every journey has its final day. Don’t rush!", a: "Zhongli "}, {q: "Hard work betrays none, but dreams betray many.", a: "Hikigaya Hachiman"}, {q: "I’m not a hero. I’m just a scientist. But a scientist can save the world.", a: "Ishigami Senku"}, {q: "People can be kind. People can be cruel. That’s just the way the world is.", a: "Elaina"}]
                },
                id: {
                    title: "Pencarian Data PDDIKTI Tidak Resmi", subtitle: "Pencarian dan Verifikasi Data Mahasiswa di Pangkalan Data PDDIKTI", placeholder: "Masukkan nama mahasiswa...", searchButton: "Cari", searching: "Mencari...", resultsTitle: "Hasil Pencarian", noResults: "Tidak ada hasil ditemukan.", errorMessage: "Gagal terhubung ke API.",
                    disclaimerTitle: "DISCLAIMER PENGGUNAAN LAYANAN KUSTOMISASI UI PDDIKTI", disclaimerContent: `<p>Layanan ini dirancang semata-mata untuk tujuan kustomisasi antarmuka pengguna (User Interface/UI) dari platform PDDIKTI. Kami tidak menyediakan, memodifikasi, menyimpan, atau memproses data yang bersumber dari PDDIKTI. Interaksi dengan data dan fungsionalitas inti PDDIKTI sepenuhnya tetap berada di bawah kendali dan tanggung jawab pengguna dan pihak PDDIKTI.</p><p>Kami memahami pentingnya integritasi data dan keberlanjutan layanan PDDIKTI. Oleh karena itu, kami menyatakan dengan tegas bahwa:</p><ul class="list-disc pl-5 space-y-2"><li><strong>Fokus Utama Adalah UI:</strong> Layanan ini HANYA berfokus pada penyediaan opsi visual atau tata letak untuk meningkatkan pengalaman pengguna pada UI PDDIKTI dan TIDAK memengaruhi fungsi inti, basis data, atau keamanan sistem PDDIKTI.</li><li><strong>Tidak Ada Modifikasi Data:</strong> Kami tidak melakukan intervensi, modifikasi, penghapusan, atau penambahan data apa pun pada sistem PDDIKTI. Seluruh data yang ditampilkan adalah data asli yang disediakan oleh PDDIKTI.</li><li><strong>Bukan Layanan Resmi PDDIKTI:</strong> Layanan ini BUKAN merupakan bagian dari atau didukung secara resmi oleh Pusat Data dan Teknologi Informasi (Pusdatin) Kementerian Pendidikan, Kebudayaan, Riset, dan Teknologi Republik Indonesia, atau pihak PDDIKTI lainnya.</li></ul><h4 class="font-bold text-lg text-pink-900 mt-6">TINDAK LANJUT ATAS POTENSI KERUGIAN:</h4><p>Jika di kemudian hari, Pusat Data dan Teknologi Informasi (Pusdatin) Kementerian Pendidikan, Kebudayaan, Riset, dan Teknologi, atau pihak yang berwenang atas platform PDDIKTI, merasa dirugikan atau menemukan bahwa layanan kami secara langsung atau tidak langsung melanggar kebijakan, menimbulkan gangguan, atau berpotensi merusak integritas sistem PDDIKTI, maka kami berhak dan akan segera melakukan langkah-langkah berikut:</p><ul class="list-disc pl-5 space-y-2"><li><strong>Penutupan Layanan:</strong> Kami akan menghentikan operasional layanan kustomisasi UI ini secara permanen.</li><li><strong>Pemblokiran Akses IP:</strong> Kami dapat melakukan pemblokiran terhadap alamat IP yang terkait dengan penyediaan layanan ini untuk mencegah akses lebih lanjut ke platform PDDIKTI jika dianggap perlu.</li></ul><p class="mt-4">Kami berkomitmen untuk menjaga etika penggunaan internet dan menghormati hak kekayaan intelektual serta keamanan sistem pihak lain.</p>`,
                    chatPlaceholderReady: "Ketik pesan...",
                    genderSelected: (gender) => `Gender telah diatur ke ${gender === 'male' ? 'Pria' : 'Wanita'}. Anda sekarang bisa chat.`,
                    errorSelectGender: "Silakan pilih gender sebelum mengirim pesan.",
                    errorSendFailed: "Gagal mengirim pesan",
                    successSend: "Pesan berhasil dikirim!",
                    faqContent: [{q: "Apakah ada yang lebih cantik dari changli?", a: "Ya, istri saya di real life."}, {q: "Jika saya laki laki dan tidak suka changli bagaimana?", a: "Silahkan ke psikolog, kejiwaan anda pasti rusak."}, {q: "Bang aku mau pinjem API nya bang, boleh?", a: "Tak boleh, saya malas setting nya."}, {q: "Bang bolehkan saya klaim changli jadi istri saya?", a: "Sharelok tak parani !!!"}, {q: "Ada waifu lain bang?", a: "Firefly kayaknya sih, tapi changli nomor satu."}],
                    aboutContent: `<p class="text-gray-700 leading-relaxed">Halo! Saya Rover si Karbit, seorang petualang sejati yang selalu siap menjelajahi setiap sudut dunia—meskipun terkadang petualangan terbesar saya adalah menemukan remote TV yang hilang. Kebanggaan terbesar saya? Saya adalah suami Changli, dan percayalah, hidup bersamanya jauh lebih menyenangkan daripada mendaki Everest (dan jauh lebih hangat juga!).</p>`,
                    allQuotes: [{q: "Setiap perjalanan memiliki hari terakhirnya. Jangan terburu-buru!", a: "Zhongli"}, {q: "Kerja keras tidak mengkhianati siapa pun, tetapi mimpi mengkhianati banyak orang.", a: "Hikigaya Hachiman"}, {q: "Aku bukan pahlawan. Aku hanya seorang ilmuwan. Tapi seorang ilmuwan bisa menyelamatkan dunia.", a: "Ishigami Senku"}, {q: "Manusia bisa bersikap baik. Manusia juga bisa kejam. Itulah cara dunia bekerja.", a: "Elaina"}]
                }
            };
            function setLanguage(lang) {
                const t = translations[lang];
                document.querySelector('html').lang = lang; // Set language on HTML tag
                document.title = t.title; // Update page title
                document.querySelector('h1').textContent = t.title;
                document.querySelector('h1 + p').textContent = t.subtitle;
                searchInput.placeholder = t.placeholder;
                searchButtonText.textContent = t.searchButton;
                currentLanguage.textContent = lang === 'en' ? 'English' : 'Indonesia';
                document.getElementById('disclaimer-title').textContent = t.disclaimerTitle;
                document.getElementById('disclaimer-content').innerHTML = t.disclaimerContent;
                if (!userAuthorID) {
                    chatInputField.placeholder = lang === 'id' ? 'Pilih gender dulu...' : 'Select a gender first...';
                } else {
                    chatInputField.placeholder = t.chatPlaceholderReady;
                }
                updateAboutLanguage(lang);
                updateFaqContent();
                updateQuote();
            }

            function updateAboutLanguage(lang) {
                document.getElementById('about-content-en').innerHTML = translations.en.aboutContent;
                document.getElementById('about-content-id').innerHTML = translations.id.aboutContent;
                if (lang === 'en') {
                    document.getElementById('about-content-en').classList.remove('hidden');
                    document.getElementById('about-content-id').classList.add('hidden');
                } else {
                    document.getElementById('about-content-id').classList.remove('hidden');
                    document.getElementById('about-content-en').classList.add('hidden');
                }
            }

            function updateFaqContent() {
                const lang = currentLanguage.textContent === 'English' ? 'en' : 'id';
                const container = document.getElementById('faq-content-container');
                container.innerHTML = '';
                translations[lang].faqContent.forEach(item => {
                    const el = document.createElement('div');
                    el.className = 'bg-pink-50 p-4 rounded-lg';
                    el.innerHTML = `<h4 class="font-bold text-pink-800 mb-2">${item.q}</h4><p>${item.a}</p>`;
                    container.appendChild(el);
                });
            }
            
            let quoteIndex = 0;
            function updateQuote() {
                const lang = currentLanguage.textContent === 'English' ? 'en' : 'id';
                const quotes = translations[lang].allQuotes;
                quoteIndex = (quoteIndex + 1) % quotes.length;
                document.getElementById('quote-of-the-day').textContent = `"${quotes[quoteIndex].q}"`;
                document.getElementById('quote-author').textContent = `- ${quotes[quoteIndex].a}`;
            }
            setInterval(updateQuote, 5000);

            languageOptions.forEach(o => o.addEventListener('click', e => { e.preventDefault(); setLanguage(o.dataset.lang); }));
            mobileLanguageOptions.forEach(o => o.addEventListener('click', e => { e.preventDefault(); setLanguage(o.dataset.lang); mobileMenu.classList.add('hidden'); }));

            // --- Modal Management ---
            const modals = [
                { id: 'student-modal', link: null, mobileLink: null, close: 'close-modal', content: 'modal-content' },
                { id: 'disclaimer-modal', link: 'disclaimer-link', mobileLink: 'mobile-disclaimer-link', close: 'close-disclaimer-modal', content: 'disclaimer-modal-content' },
                { id: 'faq-modal', link: 'faq-link', mobileLink: 'mobile-faq-link', close: 'close-faq-modal', content: 'faq-modal-content' },
                { id: 'about-modal', link: 'about-link-desktop', mobileLink: 'about-link-mobile', close: 'close-about-modal', content: 'about-modal-content' },
            ];

            function openModal(modal, content) {
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
                setTimeout(() => {
                    modal.classList.add('bg-opacity-50');
                    content.classList.remove('scale-95', 'opacity-0');
                }, 10);
            }

            function closeModal(modal, content) {
                modal.classList.remove('bg-opacity-50');
                content.classList.add('scale-95', 'opacity-0');
                setTimeout(() => {
                    modal.classList.add('hidden');
                    document.body.style.overflow = 'auto';
                }, 300);
            }

            modals.forEach(mInfo => {
                const modal = document.getElementById(mInfo.id);
                const content = document.getElementById(mInfo.content);
                if (mInfo.link) document.getElementById(mInfo.link).addEventListener('click', e => { e.preventDefault(); openModal(modal, content); });
                if (mInfo.mobileLink) document.getElementById(mInfo.mobileLink).addEventListener('click', e => { e.preventDefault(); openModal(modal, content); mobileMenu.classList.add('hidden'); });
                document.getElementById(mInfo.close).addEventListener('click', () => closeModal(modal, content));
                modal.addEventListener('click', e => { if (e.target === modal) closeModal(modal, content); });
            });
            
            document.getElementById('chat-link-desktop').addEventListener('click', e => { e.preventDefault(); openChat(); });
            document.getElementById('chat-link-mobile').addEventListener('click', e => { e.preventDefault(); openChat(); mobileMenu.classList.add('hidden'); });
            document.getElementById('close-chat-modal').addEventListener('click', closeChat);
            chatModal.addEventListener('click', e => { if (e.target === chatModal) closeChat(); });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    modals.forEach(mInfo => {
                        const modal = document.getElementById(mInfo.id);
                        if (!modal.classList.contains('hidden')) closeModal(modal, document.getElementById(mInfo.content));
                    });
                    if (!chatModal.classList.contains('hidden')) closeChat();
                }
            });

            document.addEventListener('mousemove', e => {
                const dot = document.createElement('div');
                dot.className = 'cursor-dot';
                dot.style.left = `${e.clientX}px`;
                dot.style.top = `${e.clientY}px`;
                document.body.appendChild(dot);
                dot.addEventListener('animationend', () => dot.remove());
            });

            function createConfetti(button) {
                const colors = ['#ff80bf', '#ff4dab', '#ffd1e3', '#ffb6d9'];
                const rect = button.getBoundingClientRect();
                for (let i = 0; i < 30; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.setProperty('--confetti-color', colors[Math.floor(Math.random() * colors.length)]);
                    confetti.style.left = `${rect.left + rect.width / 2}px`;
                    confetti.style.top = `${rect.top + rect.height / 2}px`;
                    const angle = Math.random() * 2 * Math.PI;
                    const dist = Math.random() * 50 + 20;
                    confetti.style.setProperty('--x', `${Math.cos(angle) * dist}px`);
                    confetti.style.setProperty('--y', `${Math.sin(angle) * dist}px`);
                    document.body.appendChild(confetti);
                    confetti.addEventListener('animationend', () => confetti.remove());
                }
            }

            function init() {
                setLanguage('id');
                searchButton.addEventListener('click', performSearch);
                searchInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') performSearch(); });
                mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            }
            init();
        });
    </script>
</body>
</html>
